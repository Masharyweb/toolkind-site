<!doctype html><html lang="ar" dir="rtl"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>إزالة الخلفية | NGOKit</title><link rel="stylesheet" href="/style.css"></head><body>
<header class="header"><div class="brand"><img src="/assets/logo.svg"><span>NGOKit</span></div><div class="lang-theme"><button onclick="history.back()">↩︎</button><button data-menu>☰</button></div></header>
<aside class="sidebar"><button class="close" data-close>✕</button><nav class="menu"><a href="/tools.html">🛠️ الأدوات</a></nav></aside>
<div class="tool-wrapper"><h1>إزالة الخلفية (تجريبي)</h1><div class='glass'><div class='uploader'><input id='img' type='file' accept='image/*'><label class='select'>الحساسية <input id='tol' type='range' min='10' max='80' value='30'></label><button class='btn' onclick='download()'>تحميل PNG</button><div style='margin-top:10px'><canvas id='c' style='max-width:100%;background:#fff;border-radius:12px'></canvas></div></div></div><script>const c=document.getElementById('c'),ctx=c.getContext('2d');let w=0,h=0;img.onchange=()=>load(URL.createObjectURL(img.files[0]));function load(src){const im=new Image();im.onload=()=>{w=im.naturalWidth;h=im.naturalHeight;c.width=w;c.height=h;ctx.drawImage(im,0,0)};im.src=src;}c.addEventListener('click',e=>{const r=c.getBoundingClientRect();const x=Math.floor((e.clientX-r.left)/r.width*w),y=Math.floor((e.clientY-r.top)/r.height*h);flood(x,y,parseInt(tol.value,10));});function flood(sx,sy,t){const img=ctx.getImageData(0,0,w,h),d=img.data;const id=(x,y)=>(y*w+x)*4;const [sr,sg,sb]=d.slice(id(sx,sy),id(sx,sy)+3);const q=[[sx,sy]];const seen=new Uint8Array(w*h);while(q.length){const [x,y]=q.pop();const i=id(x,y);if(seen[y*w+x])continue;seen[y*w+x]=1;const r=d[i],g=d[i+1],b=d[i+2];if(Math.abs(r-sr)+Math.abs(g-sg)+Math.abs(b-sb)<t*3){d[i+3]=0;if(x>0)q.push([x-1,y]);if(x+1<w)q.push([x+1,y]);if(y>0)q.push([x,y-1]);if(y+1<h)q.push([x,y+1]);}}ctx.putImageData(img,0,0);}function download(){const a=document.createElement('a');a.download='no-bg.png';a.href=c.toDataURL('image/png');a.click();}</script></div>
<footer class="footer">© 2025 NGOKit</footer><script src="/app.js"></script></body></html>